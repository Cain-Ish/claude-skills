{
  "rule_id": "tsx-extension-required",
  "version": "1.0.0",
  "category": "typescript-correctness",
  "severity": "error",
  "confidence": 0.95,
  "applies_to": {
    "component": "**/*.ts",
    "pattern": "<[A-Z][a-zA-Z0-9]*"
  },
  "description": "Detects .ts files containing JSX syntax that should use .tsx extension instead. TypeScript doesn't parse JSX in .ts files, causing compilation errors.",
  "validation": {
    "type": "pattern-match",
    "checks": [
      {
        "check_id": "jsx-in-ts-file",
        "type": "regex",
        "pattern": "<[A-Z][a-zA-Z0-9]*(?:\\s+[^>]*)?>",
        "context_pattern": "\\.ts$",
        "error_message": "JSX syntax detected in .ts file. TypeScript requires .tsx extension for files containing JSX."
      },
      {
        "check_id": "react-component-in-ts",
        "type": "regex",
        "pattern": "return\\s*\\([^)]*<[A-Z]",
        "context_pattern": "\\.ts$",
        "error_message": "React component JSX return detected in .ts file. Rename to .tsx extension."
      }
    ]
  },
  "fix_template": {
    "type": "rename",
    "description": "Rename file from .ts to .tsx extension",
    "auto_fix": true,
    "script": {
      "command": "mv",
      "args": ["${file_path}", "${file_path%.ts}.tsx"]
    },
    "example": {
      "before": "src/api/templates.test.ts (contains JSX)",
      "after": "src/api/templates.test.tsx"
    }
  },
  "impact": {
    "compilation": "critical",
    "developer_experience": "high",
    "description": "TypeScript compilation fails with TS1005, TS1128, TS1161 errors when JSX appears in .ts files"
  },
  "common_errors": [
    "TS1005: '>' expected",
    "TS1005: ')' expected",
    "TS1161: Unterminated regular expression literal",
    "TS1128: Declaration or statement expected"
  ],
  "references": [
    "https://www.typescriptlang.org/docs/handbook/jsx.html",
    "https://react-typescript-cheatsheet.netlify.app/docs/basic/setup"
  ],
  "learned_from": "session:frontend-template-api-alignment",
  "discovery_context": "templates.test.ts file had JSX syntax (<QueryClientProvider>) causing 18 TypeScript compilation errors. Fixed by renaming to .tsx",
  "last_updated": "2026-01-25"
}
