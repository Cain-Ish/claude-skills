{
  "rule_id": "placeholder-test-assertion",
  "version": "1.0.0",
  "category": "test-quality",
  "severity": "warning",
  "confidence": 0.90,
  "applies_to": {
    "component": "**/*.{test,spec}.{ts,tsx,js,jsx}",
    "pattern": "\\bexpect\\s*\\("
  },
  "description": "Detects placeholder test assertions that don't validate actual behavior, such as expect(true).toBe(true) or similar trivial assertions",
  "validation": {
    "type": "pattern-match",
    "checks": [
      {
        "check_id": "trivial-assertion",
        "type": "regex",
        "pattern": "expect\\s*\\(\\s*(true|false|1|0)\\s*\\)\\s*\\.toBe\\s*\\(\\s*\\1\\s*\\)",
        "error_message": "Placeholder test assertion detected. Tests should validate actual behavior, not always-true conditions."
      },
      {
        "check_id": "todo-comment-test",
        "type": "regex",
        "pattern": "(?:it|test)\\s*\\([^)]*\\)\\s*=>\\s*\\{[^}]*(TODO|FIXME|placeholder|This test)",
        "error_message": "Test contains TODO/placeholder comments indicating incomplete implementation."
      }
    ]
  },
  "fix_template": {
    "type": "manual",
    "description": "Implement proper test assertions that validate the actual behavior of the code under test",
    "guidance": [
      "1. Identify what behavior the test is supposed to validate",
      "2. Set up the necessary test data and mocks",
      "3. Execute the code under test",
      "4. Assert on the actual results, not placeholder values",
      "5. Consider edge cases and error conditions"
    ],
    "example": {
      "before": "it('converts job_inputs to JSON string', () => {\n  // TODO: implement\n  expect(true).toBe(true);\n});",
      "after": "it('converts job_inputs to JSON string', async () => {\n  const mockMutateAsync = vi.fn().mockResolvedValue({ data: 'uuid-123' });\n  const formData = mockMutateAsync.mock.calls[0][0] as URLSearchParams;\n  expect(formData.get('job_inputs')).toBe(JSON.stringify({ key: 'value' }));\n});"
    }
  },
  "impact": {
    "test_coverage": "high",
    "code_quality": "medium",
    "description": "Placeholder tests provide false sense of coverage without actually validating behavior"
  },
  "references": [
    "https://kentcdodds.com/blog/common-mistakes-with-react-testing-library",
    "https://testing-library.com/docs/queries/about/#priority"
  ],
  "learned_from": "session:frontend-template-api-alignment",
  "discovery_context": "P2 issue: templates.test.tsx had three tests with expect(true).toBe(true) placeholders that didn't validate URLSearchParams construction",
  "last_updated": "2026-01-25"
}
