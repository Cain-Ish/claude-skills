{
  "rule_id": "command-checks-directory",
  "version": "1.0.0",
  "category": "command-correctness",
  "severity": "warning",
  "confidence": 0.85,
  "applies_to": {
    "component": "commands",
    "pattern": ".*\\.md$"
  },
  "validation": {
    "type": "static",
    "checks": [
      {
        "check_id": "has-directory-check",
        "type": "regex",
        "pattern": "plugins/[a-z-]+",
        "requires_context": true,
        "context_check": {
          "pattern": "if.*\\[\\[.*-d.*plugins/",
          "error_message": "Commands that reference plugin directories should verify they're running from the correct location"
        }
      }
    ]
  },
  "fix_template": {
    "type": "manual",
    "content": "Add directory verification:\n```bash\nif [[ ! -d \"plugins/PLUGIN_NAME\" ]]; then\n  echo \"Error: Must run from repository root\"\n  exit 1\nfi\n```"
  },
  "references": [
    "https://github.com/Cain-Ish/claude-skills/issues/self-improve-directory-check"
  ],
  "learned_from": "user_feedback",
  "discovered_at": "2026-01-25",
  "last_updated": "2026-01-25"
}
